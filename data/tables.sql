CREATE DATABASE ENGLISH_CENTER_MANAGEMENT

GO

USE ENGLISH_CENTER_MANAGEMENT

GO

CREATE TABLE CERTIFICATE (
	ID_CERTIFICATE CHAR(10) PRIMARY KEY,
	NAME NVARCHAR(100),
	CONTENT NVARCHAR(100),
	STATUS BIT
)

CREATE TABLE STAFF (
	ID_STAFF CHAR(10) PRIMARY KEY,
	FULLNAME NVARCHAR(100),
	ADDRESS NVARCHAR(100),
	PHONE_NUMBER VARCHAR(20),
	GENDER NVARCHAR(20),
	BIRTHDAY DATE,
	TYPE INT,
	STATUS BIT
)

CREATE TABLE TEACHERS (
	ID_TEACHER CHAR(10) PRIMARY KEY,
	FULLNAME NVARCHAR(100),
	PHONE_NUMBER VARCHAR(20),
	GENDER NVARCHAR(20),
	BIRTHDAY DATE,
	SALARY MONEY,
	STATUS BIT
)

CREATE TABLE CLASSROOM (
	ID_CLASSROOM CHAR(10) PRIMARY KEY,
	NAME NVARCHAR(100),
	STATUS BIT
)

CREATE TABLE POTENTIAL_STUDENT (
	ID_STUDENT CHAR(10) PRIMARY KEY,
	FULLNAME NVARCHAR(100),
	ADDRESS NVARCHAR(100),
	PHONE_NUMBER VARCHAR(20),
	GENDER NVARCHAR(20),
	LEVEL NVARCHAR(100),
	NUMBER_OF_APPOINTMENTS INT,
	STATUS BIT,
)

CREATE TABLE OFFICIAL_STUDENT (
	ID_STUDENT CHAR(10) PRIMARY KEY,
	FULLNAMR NVARCHAR(100),
	ADDRESS NVARCHAR(100),
	PHONE_NUMBER VARCHAR(20),
	GENDER NVARCHAR(20),
	BIRTHDAY DATE,
	STATUS BIT
)

CREATE TABLE COLLECTING_TUITION_FEES (
	ID_BILL CHAR(10) PRIMARY KEY,
	ID_STUDENT CHAR(10),
	COLLECTION_DATE DATE, 
	TOTAL_MONEY MONEY,
	STATUS BIT
)

CREATE TABLE CLASS (
	ID_CLASS CHAR(10) PRIMARY KEY,
	NAME NVARCHAR(100),
	START_DATE DATE,
	END_DATE DATE,
	ID_PROGRAM CHAR(10),
	ID_TEACHER CHAR(10),
	ID_STAFF CHAR(10),
	STATUS INT
)

CREATE TABLE SCHEDULE (
	ID_SCHEDULE CHAR(10) PRIMARY KEY,
	DAY_OF_WEEK INT,
	START_TIME TIME, 
	END_TIME TIME,
	ID_CLASS CHAR(10),
	ID_CLASSROOM CHAR(10),
	STATUS BIT
)

CREATE TABLE EXAMINATION (
	ID_EXAM CHAR(10) PRIMARY KEY,
	NAME NVARCHAR(100),
	FORMAT NVARCHAR(100),
	EXAM_DATE DATE,
	ID_CLASS CHAR(10),
	ID_CLASSROOM CHAR(10),
	STATUS BIT
)

CREATE TABLE EXAM_SCORE (
	ID_EXAM_SCORE CHAR(10) PRIMARY KEY,
	ID_EXAM CHAR(10),
	ID_STUDENT CHAR(10),
	SPEAKING_SCORE REAL,
	WRITING_SCORE REAL,
	LISTENING_SCORE REAL,
	READING REAL,
	STATUS BIT
)

CREATE TABLE TEACHING (
	ID_TEACHING CHAR(10) PRIMARY KEY,
	ID_STUDENT CHAR(10),
	ID_CLASS CHAR(10),
	STATUS BIT
)

CREATE TABLE PROGRAM (
	ID_PROGRAM CHAR(10) PRIMARY KEY,
	NAME NVARCHAR(100),
	INPUT_SCORE REAL,
	OUTPUT_SCORE REAL,
	CONTENT NVARCHAR(100),
	SPEAKING_SCORE REAL,
	WRITING_SCORE REAL,
	LISTENING_SCORE REAL,
	READING_SCORE REAL,
	TUITION_FEES MONEY,
	STUDY_PERIOD INT,
	ID_CERTIFICATE CHAR(10),
	STATUS BIT
)

CREATE TABLE ACCOUNT (
	ID_ACCOUNT CHAR(10) PRIMARY KEY,
	ID_USER CHAR(10),
	USERNAME VARCHAR(100),
	PASSWORD VARCHAR(100),
	STATUS BIT
)

CREATE TABLE NOTIFICATION (
	ID_NOTIFICATION CHAR(10) PRIMARY KEY,
	ID_ACCOUNT CHAR(10),
	TITLE NVARCHAR(100),
	CONTENT NVARCHAR(100),
	STATUS BIT
)

ALTER TABLE COLLECTING_TUITION_FEES ADD CONSTRAINT 
STUDENT_TUITION FOREIGN KEY (ID_STUDENT)
REFERENCES OFFICIAL_STUDENT(ID_STUDENT)

ALTER TABLE CLASS ADD CONSTRAINT CLASS_PROGRAM
FOREIGN KEY (ID_PROGRAM) REFERENCES
PROGRAM(ID_PROGRAM)

ALTER TABLE CLASS ADD CONSTRAINT CLASS_STAFF
FOREIGN KEY (ID_STAFF) REFERENCES STAFF (ID_STAFF)

ALTER TABLE CLASS ADD CONSTRAINT CLASS_TEACHER
FOREIGN KEY (ID_TEACHER) REFERENCES
TEACHERS(ID_TEACHER)

ALTER TABLE SCHEDULE ADD CONSTRAINT SCHEDULE_CLASS
FOREIGN KEY (ID_CLASS) REFERENCES CLASS(ID_CLASS)

ALTER TABLE SCHEDULE ADD CONSTRAINT SCHEDULE_CLASSROOM
FOREIGN KEY (ID_CLASSROOM) REFERENCES 
CLASSROOM (ID_CLASSROOM)

ALTER TABLE EXAMINATION ADD CONSTRAINT EXAMINATION_CLASS
FOREIGN KEY (ID_CLASS) REFERENCES CLASS(ID_CLASS)

ALTER TABLE EXAMINATION ADD CONSTRAINT EXAMINATION_CLASSROOM
FOREIGN KEY (ID_CLASSROOM) REFERENCES CLASSROOM(ID_CLASSROOM)

ALTER TABLE EXAM_SCORE ADD CONSTRAINT EXAM_SCORE_CLASS
FOREIGN KEY (ID_EXAM) REFERENCES EXAMINATION(ID_EXAM)

ALTER TABLE EXAM_SCORE ADD CONSTRAINT EXAM_SCORE_STUDENT
FOREIGN KEY (ID_STUDENT) REFERENCES OFFICIAL_STUDENT(ID_STUDENT)

ALTER TABLE TEACHING ADD CONSTRAINT TEACHING_STUDENT
FOREIGN KEY (ID_STUDENT) REFERENCES OFFICIAL_STUDENT(ID_STUDENT)

ALTER TABLE TEACHING ADD CONSTRAINT TEACHING_CLASS
FOREIGN KEY (ID_CLASS) REFERENCES CLASS(ID_CLASS)

ALTER TABLE PROGRAM ADD CONSTRAINT PROGRAM_CERTIFICATE
FOREIGN KEY (ID_CERTIFICATE) REFERENCES
CERTIFICATE(ID_CERTIFICATE)

ALTER TABLE ACCOUNT ADD CONSTRAINT ACCOUNT_STUDENT
FOREIGN KEY (ID_USER) REFERENCES 
OFFICIAL_STUDENT(ID_STUDENT)

ALTER TABLE ACCOUNT ADD CONSTRAINT ACCOUNT_STAFF
FOREIGN KEY (ID_USER) REFERENCES STAFF(ID_STAFF)

ALTER TABLE NOTIFICATION ADD CONSTRAINT NOTIFICATION_ACCOUNT
FOREIGN KEY (ID_ACCOUNT) REFERENCES ACCOUNT(ID_ACCOUNT)

